# /autopilot - 자동 작업 실행 모드

세션 시작 시 자동으로 이슈 분석 및 작업을 **토큰 한도까지 연속 실행**합니다.

## 사용법

```
/autopilot              # 자동 실행 시작
```

## 실행 흐름

```
/autopilot 실행
    │
    ├─ 1. /init (레포 분석)
    │
    ├─ 2. /issues (이슈 목록 조회)
    │      │
    │      ├─ 이슈 있음 → 우선순위 정렬 → 작업 실행 ─┐
    │      │                                        │
    │      └─ 이슈 없음 → /parallel-research        │
    │                          │                    │
    │                          └─ 개선안 → 이슈 등록 ┘
    │
    ├─ 3. 작업 실행 (우선순위 순)
    │      │
    │      └─ PRE_WORK → IMPL → FINAL_CHECK → PR
    │
    ├─ 4. 반복 (토큰 한도까지)
    │
    └─ 5. 토큰 한도 도달 → 세션 종료
           │
           └─ 세션 초기화 후 사용자가 /autopilot 입력 → 재개
```

## 핵심 원칙

| 원칙 | 설명 |
|------|------|
| **무한 반복** | 이슈 처리 → 없으면 생성 → 처리 → 반복 |
| **토큰 한도 의존** | 세션 한도 없음, 토큰 소진 시 자동 종료 |
| **수동 재개** | 세션 초기화 후 사용자가 `/autopilot` 입력 필요 |
| **자동 이슈 등록** | 개선안 도출 즉시 이슈 등록 후 작업 |

> **참고**: Claude Code는 세션 초기화 후 자동 실행 기능이 없습니다.
> 사용자가 `/autopilot`을 입력해야 작업이 재개됩니다.

## 우선순위 기준

| 순위 | 라벨 | 설명 |
|------|------|------|
| 1 | `bug`, `critical` | 긴급 버그 |
| 2 | `security` | 보안 취약점 |
| 3 | `good first issue` | 난이도 낮음 |
| 4 | `enhancement` | 기능 개선 |
| 5 | `documentation` | 문서 |
| 6 | `chore`, `refactor` | 유지보수 |

### 난이도 자동 판단

```
Low:    파일 ≤2, 변경 <50줄      → 우선 처리
Medium: 파일 3-5, 변경 50-200줄
High:   파일 ≥6, 아키텍처 변경   → 후순위
```

## 대기 조건 (자동 진행 중지)

| 조건 | 동작 | 이유 |
|------|------|------|
| MAJOR 버전 변경 | ⏸️ 사용자 확인 | Breaking changes 영향도 |
| Critical 보안 취약점 | ⏸️ 사용자 확인 | 보안 위험 판단 |
| 배포 (Phase 5) | ⏸️ 사용자 확인 | 프로덕션 변경 |
| 연속 3회 실패 | 수동 개입 요청 | 자동 해결 불가 |
| **토큰 한도** | 세션 종료 | 다음 세션에서 재개 |

## 자동 생성 이슈 품질 기준

| 기준 | 설명 |
|------|------|
| 중복 검사 | 기존 이슈/PR과 유사도 80% 이상이면 스킵 |
| 실행 가능성 | 구체적인 파일/위치 명시 |
| 테스트 가능성 | 검증 방법 포함 |
| 영향도 분석 | 변경 범위 및 위험도 명시 |

## 예시

### 이슈 있을 때

```
$ /autopilot

🔍 /init 레포 분석 중...
📋 /issues → 3개 발견

우선순위 정렬:
1. #123 [bug] 로그인 실패 처리 누락 (Low)
2. #124 [enhancement] 캐시 추가 (Medium)
3. #125 [chore] 의존성 업데이트 (Low)

#123 작업 시작...
[PRE_WORK → IMPL → FINAL_CHECK → PR 생성]
✅ #123 완료 → PR #456

#124 작업 시작...
[PRE_WORK → IMPL → FINAL_CHECK → PR 생성]
✅ #124 완료 → PR #457

#125 작업 시작...
✅ #125 완료 → PR #458

📋 이슈 0개 남음 → /parallel-research 실행...
```

### 이슈 없을 때

```
$ /autopilot

🔍 /init 레포 분석 중...
📋 /issues → 0개

🔬 /parallel-research 실행 중...
   - 코드 품질 분석
   - 성능 병목점 탐색
   - 보안 취약점 스캔
   - 테스트 커버리지 확인

📝 개선안 5개 → 이슈 자동 등록
#126 테스트 커버리지 75% → 85%
#127 N+1 쿼리 최적화
#128 미사용 의존성 제거
#129 API 응답 시간 개선
#130 에러 핸들링 표준화

#126 작업 시작...
[PRE_WORK → IMPL → FINAL_CHECK → PR 생성]
✅ #126 완료 → PR #459

#127 작업 시작...
...

⚡ 토큰 한도 도달 → 세션 종료
   처리 완료: #126, #127
   남은 이슈: #128, #129, #130
   다음 세션: /autopilot 으로 재개
```

## 관련 커맨드

- `/init` - 레포 분석
- `/issues` - 이슈 목록
- `/parallel-research` - 프로젝트 분석
- `/fix-issue` - 단일 이슈 해결
