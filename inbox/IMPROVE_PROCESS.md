# 피드백 기반 자동 개선 프로세스

`inbox/` 폴더에 새 데이터 감지 시 실행되는 개선 워크플로우입니다.

---

## 1. 제안 원칙 (필수 준수)

제안하기 전에 반드시 확인:

| 체크 | 항목 | 확인 방법 |
|------|------|----------|
| □ | 이미 존재하는 기능인가? | 코드베이스 검색 (Glob, Grep) |
| □ | 기존 워크플로우와 중복인가? | CLAUDE.md, commands/ 확인 |
| □ | 사용자 개입을 줄이는 방향인가? | 자동화 우선 원칙 |
| □ | 실제 행동 변화를 만드는가? | 문서만 늘리면 ❌ |
| □ | 프로젝트 철학에 부합하는가? | CLAUDE.md 원칙 확인 |

### 금지 패턴

```
❌ 선택지 나열 후 사용자에게 선택 요청
❌ 이미 존재하는 기능 중복 문서화
❌ 사용자 개입 늘리는 방향 제안
❌ 기존 파일 확인 없이 일반론 제안
```

### 권장 패턴

```
✅ 최선안 제시 → 확인 요청 ("이게 최선입니다. 진행할까요?")
✅ 에이전트가 자동 판단 → 결과만 보고
✅ 기존 기능 확인 후 필요 시에만 제안
✅ 자동화로 해결 가능하면 자동화 우선
```

---

## 2. 개선 워크플로우

### Step 1: 데이터 분석 (Analyzer)

```
inbox/ 폴더의 새 파일 읽기:
- *.json: 구조화된 피드백
- *.md: 자유 형식 피드백
- *.csv: 수집된 데이터
```

피드백 분류:
| 유형 | 예시 |
|------|------|
| 버그 리포트 | 에러 발생, 동작 안함 |
| 기능 요청 | 새 기능, 개선 요청 |
| 성능 이슈 | 느림, 타임아웃 |
| 사용성 | UX 불편, 혼란스러움 |

### Step 2: 개선안 도출

각 피드백에 대해:
1. 문제점 식별
2. 영향 범위 분석
3. **기존 기능으로 해결 가능한지 먼저 확인**
4. 불가능할 때만 새 개선안 도출

### Step 3: 엄격한 평가 (Evaluator)

| 평가 항목 | 가중치 | 기준 |
|----------|--------|------|
| 기존 기능 중복 | 탈락 | 이미 있으면 제안 안 함 |
| 자동화 가능성 | 30% | 사용자 개입 없이 해결? |
| 실현 가능성 | 25% | 현재 코드베이스에서 구현 가능? |
| 영향도 | 25% | 문제 해결 효과 (1-10) |
| 리스크 | 20% | 기존 기능 영향 |

**통과 기준**:
- 기존 기능 중복 → 즉시 탈락
- 종합 점수 70점 미만 → 탈락

### Step 4: 개선 실행 (Improver)

평가 통과한 개선안만:
1. 자동화 방식 우선 검토
2. TDD 방식으로 테스트 먼저
3. 최소 구현
4. 기존 테스트 통과 확인

### Step 5: 결과 보고

```markdown
## 개선 처리 결과

### 분석된 피드백: N건

### 처리 결과
| # | 피드백 요약 | 판정 | 사유 |
|---|------------|------|------|
| 1 | ... | ✅ 개선 적용 | 자동화로 해결 |
| 2 | ... | ⏭️ 기존 기능 | `/tdd` 커맨드 이미 존재 |
| 3 | ... | ❌ 기준 미달 | 점수 65점 |

### 적용된 변경사항
- [변경 내용]

### 처리 완료
- 원본: inbox/처리된파일.json
- 이동: inbox/processed/
```

---

## 3. 파일 구조

```
D:\AI\claude01\inbox\
├── IMPROVE_PROCESS.md    # 이 파일 (프로세스 정의)
├── *.json                # 새 피드백 (처리 대기)
├── *.md                  # 새 피드백 (처리 대기)
└── processed/            # 처리 완료된 파일
    └── YYYYMMDD_*.json
```

---

## 4. 트리거 조건

### 새 파일 판단 기준

```
새 파일 = inbox/ 내 파일 중 processed/에 동일 파일명이 없는 것
```

**체크 방법**:
1. `inbox/*.json`, `*.md`, `*.csv` 파일 목록 조회
2. `inbox/processed/` 파일 목록 조회
3. inbox에만 있고 processed에 없는 파일 = 새 파일
4. `IMPROVE_PROCESS.md`는 제외

**처리 완료 후**:
- 원본 파일을 `inbox/processed/`로 이동 (파일명 유지)
- 이동된 파일은 다음 세션에서 "새 파일"로 인식 안 됨

---

## 5. 과거 실패 사례 (참고)

| 제안 | 거절 이유 | 교훈 |
|------|----------|------|
| Think Hierarchy 문서화 | 이미 내장 기능 | 기존 기능 확인 필수 |
| Plan Mode 섹션 추가 | 실제 동작 변화 없음 | 문서만 늘리면 안됨 |
| TDD 상세화 | `/tdd` 커맨드 이미 존재 | 중복 확인 필수 |
| Clarifying Questions | 사용자 개입 증가 | 자동화 우선 |
